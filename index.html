<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Blue - The Gate</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            color: #fff;
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-weight: 300;
            line-height: 1.6;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .container {
            text-align: center;
            max-width: 600px;
            padding: 2rem;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .container.visible {
            opacity: 1;
        }

        .text-content {
            margin-bottom: 3rem;
        }

        .main-text {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            font-weight: 300;
        }

        .sub-text {
            font-size: 1rem;
            margin-bottom: 2rem;
            font-weight: 300;
        }

        .game-over-text {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            font-weight: 400;
        }

        .final-text {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            font-weight: 400;
        }

        .button-group {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .button {
            background: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 1rem 2rem;
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            min-height: 44px;
            min-width: 120px;
        }

        .button:hover {
            background: #fff;
            color: #000;
        }

        .button:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
        }

        .final-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;
        }

        .final-button {
            background: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 1rem 2rem;
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            min-height: 44px;
            min-width: 200px;
        }

        .final-button:hover {
            background: #fff;
            color: #000;
        }

        .final-button:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
        }

        .amount-text {
            font-size: 0.9rem;
            color: #ccc;
            margin-top: 1rem;
            font-weight: 300;
        }

        .subline {
            font-size: 0.8rem;
            color: #666;
            margin-top: 2rem;
            font-weight: 300;
        }

        .raffle-note {
            font-size: 0.7rem;
            color: #666;
            margin-top: 0.5rem;
            font-weight: 300;
        }

        .final-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .final-button.disabled:hover {
            background: transparent;
            color: #fff;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: #000;
            border: 1px solid #fff;
            padding: 2rem;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            text-align: left;
            line-height: 1.6;
        }

        .modal-text {
            font-size: 0.9rem;
            margin-bottom: 2rem;
            white-space: pre-line;
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .modal-button {
            background: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 0.5rem 1rem;
            font-family: inherit;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-button:hover {
            background: #fff;
            color: #000;
        }

        .modal-button.secondary {
            border-color: #666;
            color: #666;
        }

        .modal-button.secondary:hover {
            background: #666;
            color: #000;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .button-group {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }
            
            .button {
                min-width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="gate">
        <div class="text-content">
            <div class="main-text">The ocean waits in silence.</div>
            <div class="sub-text">Will you board?</div>
        </div>
        <div class="button-group">
            <button class="button" onclick="makeChoice('yes')">YES</button>
            <button class="button" onclick="makeChoice('no')">NO</button>
        </div>
    </div>

    <div class="container hidden" id="mirror">
        <div class="text-content">
            <div class="main-text">Some journeys leave no trace.</div>
            <div class="sub-text">Others echo forever.</div>
            <div class="sub-text">Weave your name into history?</div>
        </div>
        <div class="button-group">
            <button class="button" onclick="makeChoice('yes')">YES</button>
            <button class="button" onclick="makeChoice('no')">NO</button>
        </div>
    </div>

    <div class="container hidden" id="throne">
        <div class="text-content">
            <div class="main-text">Three passengers.</div>
            <div class="sub-text">One could be YOU.</div>
            <div class="sub-text">Claim it?</div>
        </div>
        <div class="button-group">
            <button class="button" onclick="makeChoice('yes')">YES</button>
            <button class="button" onclick="makeChoice('no')">NO</button>
        </div>
    </div>

    <div class="container hidden" id="final">
        <div class="text-content">
            <div class="final-text">Legacy is not money.</div>
            <div class="final-text">It is motion.</div>
            <div class="amount-text">Contribution per legacy seat: €18,000</div>
        </div>
        <div class="final-buttons">
            <button class="final-button" onclick="showDisclaimer('claim')">Claim Legacy Seat (€18k)</button>
            <button class="final-button" onclick="showDisclaimer('gift')">Gift a Seat</button>
            <button class="final-button disabled" id="raffleBtn" onclick="handleRaffle()">Raffle (€1.80) — Locked</button>
        </div>
        <div id="raffleNote" class="raffle-note">Unlocks after the first Legacy Seat is claimed.</div>
        <div class="subline">Only three.<br>Eight days remain.</div>
    </div>

    <div class="container hidden" id="gameover">
        <div class="text-content">
            <div class="game-over-text" id="gameover-text">You stayed behind.<br>Game Over.</div>
        </div>
        <div class="button-group">
            <button class="button" onclick="restart()">Restart</button>
        </div>
    </div>

    <!-- Disclaimer Modal -->
    <div class="modal-overlay" id="disclaimerModal" role="dialog" aria-modal="true">
        <div class="modal-content">
                         <div class="modal-text" id="disclaimerText">
The Promoter, the Global Youth Coalition (GYC), invites you to sail and put tangible solutions on the table. Stop talking, start protecting.

Operating in collaboration with Norsk klimanettverk (registered in Norway).

For the purposes of this competition, GYC can be contacted at theglobalyouthcoalition@gmail.com or takeaction@theglobalyouth.co.

GYC is a youth-led climate initiative; the Promoter is responsible for the administration of the raffle and the award of the prize.

By continuing, you acknowledge the responsibilities and risks inherent to sailing. This is not a leisure babysitting cruise. This mission is for the planet and an evolution of society.</div>
            <div class="modal-buttons">
                <button class="modal-button secondary" type="button" onclick="closeDisclaimer()">Close</button>
                <button class="modal-button" id="continueBtn" type="button" onclick="continueAction()">Continue</button>
            </div>
        </div>
    </div>

    <script>
        let angelSold = false; // set true when first legacy seat is sold; unlocks raffle
        let currentAction = '';
        let currentState = 'gate';
        const gameOverMessages = {
            'gate': 'You stayed behind.<br>Game Over.',
            'mirror': 'You looked away.<br>Forgotten.',
            'throne': 'You refused the crown.'
        };

        function showState(state) {
            // Hide all containers
            document.querySelectorAll('.container').forEach(container => {
                container.classList.add('hidden');
                container.classList.remove('visible');
            });

            // Show target container
            const targetContainer = document.getElementById(state);
            targetContainer.classList.remove('hidden');
            
            // Trigger fade in
            setTimeout(() => {
                targetContainer.classList.add('visible');
            }, 50);
        }

        function makeChoice(choice) {
            if (currentState === 'gate') {
                if (choice === 'no') {
                    currentState = 'gameover';
                    document.getElementById('gameover-text').innerHTML = gameOverMessages.gate;
                } else {
                    currentState = 'mirror';
                }
            } else if (currentState === 'mirror') {
                if (choice === 'no') {
                    currentState = 'gameover';
                    document.getElementById('gameover-text').innerHTML = gameOverMessages.mirror;
                } else {
                    currentState = 'throne';
                }
            } else if (currentState === 'throne') {
                if (choice === 'no') {
                    currentState = 'gameover';
                    document.getElementById('gameover-text').innerHTML = gameOverMessages.throne;
                } else {
                    currentState = 'final';
                }
            }

            showState(currentState);
        }

        function restart() {
            currentState = 'gate';
            showState(currentState);
        }

        function showDisclaimer(action) {
            currentAction = action;
            const modal = document.getElementById('disclaimerModal');
            modal.classList.add('visible');
            
            // Trap focus in modal
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.focus();
        }

        function closeDisclaimer() {
            const modal = document.getElementById('disclaimerModal');
            const disclaimerText = document.getElementById('disclaimerText');
            const continueBtn = document.getElementById('continueBtn');
            
            // Reset modal content to original disclaimer
            disclaimerText.innerHTML = `The Promoter, the Global Youth Coalition (GYC), invites you to sail and put tangible solutions on the table. Stop talking, start protecting.

Operating in collaboration with Norsk klimanettverk (registered in Norway).

For the purposes of this competition, GYC can be contacted at theglobalyouthcoalition@gmail.com or takeaction@theglobalyouth.co.

GYC is a youth-led climate initiative; the Promoter is responsible for the administration of the raffle and the award of the prize.

By continuing, you acknowledge the responsibilities and risks inherent to sailing. This is not a leisure babysitting cruise. This mission is for the planet and an evolution of society.`;
            
            // Reset Continue button to original state
            continueBtn.style.display = 'inline-block';
            continueBtn.textContent = 'Continue';
            continueBtn.onclick = continueAction;
            continueBtn.classList.remove('secondary');
            continueBtn.disabled = false;
            
            // Remove any existing iframe
            const existingIframe = disclaimerText.querySelector('iframe');
            if (existingIframe) {
                existingIframe.remove();
            }
            
            modal.classList.remove('visible');
            currentAction = '';
        }

        function continueAction() {
            if (currentAction === 'claim') {
                openFormspreeForm('claim');
            } else if (currentAction === 'gift') {
                openFormspreeForm('gift');
            }
            closeDisclaimer();
        }

        function openFormspreeForm(action) {
            const modal = document.getElementById('disclaimerModal');
            const disclaimerText = document.getElementById('disclaimerText');
            const continueBtn = document.getElementById('continueBtn');
            
            // Hide the Continue button
            continueBtn.style.display = 'none';
            
            // Create iframe with Formspree form
            const formUrl = 'https://formspree.io/f/mrbapwyv';
            const iframe = document.createElement('iframe');
            iframe.src = formUrl;
            iframe.style.width = '100%';
            iframe.style.height = '400px';
            iframe.style.border = '1px solid #fff';
            iframe.style.background = 'transparent';
            iframe.style.marginTop = '1rem';
            
            // Clear modal content and add iframe
            disclaimerText.innerHTML = '';
            disclaimerText.appendChild(iframe);
            
            modal.classList.add('visible');
        }



        function handleRaffle() {
            if (!angelSold) {
                return; // Do nothing if locked
            }
            
            // Show raffle info panel
            const modal = document.getElementById('disclaimerModal');
            const disclaimerText = document.getElementById('disclaimerText');
            const continueBtn = document.getElementById('continueBtn');
            
            disclaimerText.textContent = 'This draw opens once the voyage is confirmed.';
            continueBtn.textContent = 'Continue';
            continueBtn.disabled = true;
            continueBtn.classList.add('secondary');
            
            modal.classList.add('visible');
            continueBtn.focus();
        }

        function unlockRaffle() {
            angelSold = true;
            const raffleBtn = document.getElementById('raffleBtn');
            const raffleNote = document.getElementById('raffleNote');
            
            raffleBtn.classList.remove('disabled');
            raffleBtn.textContent = 'Raffle (€1.80)';
            raffleNote.style.display = 'none';
        }

        function handleKeyPress(e) {
            const key = e.key.toLowerCase();
            
            if (key === 'y' && (currentState === 'gate' || currentState === 'mirror' || currentState === 'throne')) {
                makeChoice('yes');
            } else if (key === 'n' && (currentState === 'gate' || currentState === 'mirror' || currentState === 'throne')) {
                makeChoice('no');
            } else if (key === 'r' && currentState === 'gameover') {
                restart();
            } else if (key === 'escape' && document.getElementById('disclaimerModal').classList.contains('visible')) {
                closeDisclaimer();
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            showState('gate');
        });

        // Event listeners
        document.addEventListener('keydown', handleKeyPress);
    </script>
</body>
</html>
